import{r as u,w as $,A as S,g as M,h,i as y,b as t,u as g,j,d as c,t as l,q as L,v as D,y as H,l as w,c as n,s as B,n as p,f as r,F as N,e as V}from"./app-BiE81L3r.js";import{B as I}from"./BeLayout-c8f4LfUo.js";import{_ as q}from"./Includes-0G2CgwRG.js";const F={class:"row mb-2"},O={class:"col-lg-12"},U={class:"text-muted"},z={class:"row card mb-2"},E={class:"col-sm-12 col-md-12 col-lg-12"},P={class:"card-body"},G={class:"row"},J={class:"col-md-4"},K={class:"card text-bg-success mb-3"},Q={class:"card-body"},R={class:"card-title text-white"},W={class:"row mb-3"},X={class:"col-md-8 mb-2"},Y={class:"input-group"},Z={class:"col-md-2 mb-2"},tt={class:"col-md-2 mb-2"},st={class:"row"},et={class:"col-lg-12"},lt={class:"card"},ot={class:"card-body"},at={class:"table-responsive"},rt={class:"table table-hover align-middle"},nt={key:0},it={class:"badge bg-info"},dt={class:"badge bg-secondary me-1"},ut={class:"badge bg-secondary me-1"},ct={class:"badge bg-secondary me-1"},bt={class:"badge bg-secondary"},mt={class:"btn-group",role:"group"},vt=["onClick"],gt={key:0,class:"d-flex justify-content-between align-items-center mt-3"},pt={class:"text-muted small"},ft={class:"pagination mb-0"},_t=["innerHTML"],ht={__name:"Index",props:{tiers:Object,filters:Object,totalCount:Number},setup(o){const b=o,m=u(b.filters.search||""),v=u(b.filters.per_page||10),d=u(b.filters.sort_by||"created_at"),i=u(b.filters.sort_order||"desc"),T=u(null);$([m,v,d,i],()=>{clearTimeout(T.value),T.value=setTimeout(()=>{S.get("/programs/tiers",{search:m.value,per_page:v.value,sort_by:d.value,sort_order:i.value},{preserveState:!0,preserveScroll:!0})},300)});const A=a=>{confirm("Are you sure you want to delete this tier?")&&S.delete(`/programs/tiers/${a}`,{preserveScroll:!0})},f=a=>{d.value===a?i.value=i.value==="asc"?"desc":"asc":(d.value=a,i.value="asc")},_=a=>d.value!==a?"bi bi-arrow-down-up":i.value==="asc"?"bi bi-arrow-up":"bi bi-arrow-down";return(a,s)=>(r(),M(I,null,{default:h(()=>{var x,k,C;return[y(g(j),{title:"Tiers"}),s[20]||(s[20]=t("div",{class:"row"},[t("div",{class:"col-lg-12"},[t("h5",{class:"mt-4 fw-400"},"Tiers Management"),t("hr")])],-1)),t("div",F,[t("div",O,[t("p",U,[s[5]||(s[5]=c(" Manage measurement tiers for indicators and frameworks. Total: ",-1)),t("strong",null,l(o.totalCount),1)])])]),t("div",z,[t("div",E,[t("div",P,[t("div",G,[t("div",J,[t("div",K,[s[6]||(s[6]=t("div",{class:"card-header"},"Total Tiers",-1)),t("div",Q,[t("h3",R,l(o.totalCount),1)])])])])])]),t("div",W,[t("div",X,[t("div",Y,[s[7]||(s[7]=t("span",{class:"input-group-text"},[t("i",{class:"bi bi-search"})],-1)),L(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>m.value=e),type:"text",class:"form-control",placeholder:"Search by tier, level, or attribution..."},null,512),[[D,m.value]])])]),t("div",Z,[L(t("select",{"onUpdate:modelValue":s[1]||(s[1]=e=>v.value=e),class:"form-select"},[...s[8]||(s[8]=[t("option",{value:10},"10 per page",-1),t("option",{value:25},"25 per page",-1),t("option",{value:50},"50 per page",-1),t("option",{value:100},"100 per page",-1)])],512),[[H,v.value]])]),t("div",tt,[y(g(w),{href:a.route("programs.tiers.create"),class:"btn btn-success w-100"},{default:h(()=>[...s[9]||(s[9]=[t("i",{class:"bi bi-plus-circle"},null,-1),c(" Add Tier ",-1)])]),_:1},8,["href"])])])]),t("div",st,[t("div",et,[t("div",lt,[t("div",ot,[t("div",at,[t("table",rt,[t("thead",null,[t("tr",null,[t("th",{onClick:s[2]||(s[2]=e=>f("tier")),class:"sortable"},[s[10]||(s[10]=c(" Tier ",-1)),t("i",{class:p(_("tier"))},null,2)]),t("th",{onClick:s[3]||(s[3]=e=>f("level")),class:"sortable"},[s[11]||(s[11]=c(" Level ",-1)),t("i",{class:p(_("level"))},null,2)]),s[13]||(s[13]=t("th",null,"Measurement Frequency",-1)),s[14]||(s[14]=t("th",null,"Attribution",-1)),s[15]||(s[15]=t("th",null,"Usage",-1)),t("th",{onClick:s[4]||(s[4]=e=>f("created_at")),class:"sortable"},[s[12]||(s[12]=c(" Created ",-1)),t("i",{class:p(_("created_at"))},null,2)]),s[16]||(s[16]=t("th",null,"Actions",-1))])]),t("tbody",null,[(x=o.tiers)!=null&&x.data&&o.tiers.data.length===0?(r(),n("tr",nt,[...s[17]||(s[17]=[t("td",{colspan:"7",class:"text-center text-muted"},"No tiers found",-1)])])):B("",!0),(r(!0),n(N,null,V((k=o.tiers)==null?void 0:k.data,e=>(r(),n("tr",{key:e.id},[t("td",null,[t("span",it,l(e.tier),1)]),t("td",null,[t("strong",null,l(e.level),1)]),t("td",null,[t("small",null,l(e.measurement_frequency),1)]),t("td",null,[t("small",null,l(e.attribution),1)]),t("td",null,[t("small",null,[t("span",dt,l(e.indicators_count||0)+" indicators",1),t("span",ut,l(e.sectoral_goals_count||0)+" goals",1),t("span",ct,l(e.presidential_priorities_count||0)+" priorities",1),t("span",bt,l(e.bond_outcomes_count||0)+" outcomes",1)])]),t("td",null,[t("small",null,l(new Date(e.created_at).toLocaleDateString()),1)]),t("td",null,[t("div",mt,[y(g(w),{href:a.route("programs.tiers.edit",e.id),class:"btn btn-sm btn-outline-primary"},{default:h(()=>[...s[18]||(s[18]=[t("i",{class:"bi bi-pencil"},null,-1)])]),_:1},8,["href"]),t("button",{onClick:yt=>A(e.id),class:"btn btn-sm btn-outline-danger"},[...s[19]||(s[19]=[t("i",{class:"bi bi-trash"},null,-1)])],8,vt)])])]))),128))])])]),(C=o.tiers)!=null&&C.data&&o.tiers.data.length>0?(r(),n("div",gt,[t("div",pt," Showing "+l(o.tiers.from)+" to "+l(o.tiers.to)+" of "+l(o.tiers.total)+" entries ",1),t("nav",null,[t("ul",ft,[(r(!0),n(N,null,V(o.tiers.links,e=>(r(),n("li",{key:e.label,class:p(["page-item",{active:e.active,disabled:!e.url}])},[e.url?(r(),M(g(w),{key:0,href:e.url,class:"page-link",innerHTML:e.label},null,8,["href","innerHTML"])):(r(),n("span",{key:1,class:"page-link",innerHTML:e.label},null,8,_t))],2))),128))])])])):B("",!0)])])])])]}),_:1}))}},kt=q(ht,[["__scopeId","data-v-3daa7ef3"]]);export{kt as default};
