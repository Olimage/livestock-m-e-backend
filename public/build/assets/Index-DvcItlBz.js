import{r as h,w as $,A,g as x,h as f,i as _,b as e,u as m,j as C,c as a,f as l,F as v,e as b,l as y,d as T,t as o,q as w,v as H,y as k,s as M,n as B}from"./app-CiXUQgw4.js";import{B as E}from"./BeLayout-CIXHp9VI.js";import{_ as F}from"./Includes-hdAwAFFO.js";const I={class:"row mb-3"},U={class:"col-12 d-flex justify-content-between align-items-center"},O={class:"btn-group"},R={class:"btn-group ms-2"},q={class:"card mb-3"},z={class:"card-body"},J={class:"row g-2"},P={class:"col-md-3"},Y={class:"col-md-2"},G=["value"],K={class:"col-md-2"},Q=["value"],W={class:"col-md-2"},X={class:"card"},Z={class:"card-body table-responsive"},ee={class:"table table-hover align-middle"},te={key:0},se={class:"badge bg-primary"},le={key:0,class:"d-flex justify-content-between align-items-center"},ae={class:"small text-muted"},ne={class:"pagination mb-0"},oe=["innerHTML"],re={__name:"Index",props:{records:Object,filters:Object,formTypes:Array,syncStatuses:Array},setup(n){const p=n,d=h(p.filters.search||""),i=h(p.filters.form_type||""),c=h(p.filters.sync_status||""),g=h(p.filters.per_page||15);let V=null;$([d,i,c,g],()=>{clearTimeout(V),V=setTimeout(()=>{A.get(route("enumerations.index"),{search:d.value,form_type:i.value,sync_status:c.value,per_page:g.value},{preserveState:!0,preserveScroll:!0})},300)});const N=r=>{switch(r){case"synced":return"bg-success";case"failed":return"bg-danger";default:return"bg-warning text-dark"}},j=r=>{if(!r)return"";const s=new Date(r),t=S=>S<10?"0"+S:S;let u=s.getHours();const D=t(s.getMinutes()),L=u>=12?"pm":"am";return u=u%12,u=u||12,`${t(s.getDate())}-${t(s.getMonth()+1)}-${s.getFullYear()} - ${t(u)}:${D} ${L}`};return(r,s)=>(l(),x(E,null,{default:f(()=>[_(m(C),{title:"Enumeration Records"}),e("div",I,[e("div",U,[s[7]||(s[7]=e("h5",{class:"mt-4 fw-400"},"Enumeration Records",-1)),e("div",O,[(l(!0),a(v,null,b(n.formTypes,t=>(l(),x(m(y),{key:t,href:r.route("enumerations.create",t),class:"btn btn-sm btn-success"},{default:f(()=>[s[4]||(s[4]=e("i",{class:"bi bi-plus-circle"},null,-1)),T(" New "+o(t.replace("_"," ")),1)]),_:2},1032,["href"]))),128)),e("div",R,[_(m(y),{href:r.route("enumerations.export",{format:"csv",form_type:i.value,sync_status:c.value,search:d.value}),class:"btn btn-sm btn-outline-primary"},{default:f(()=>[...s[5]||(s[5]=[e("i",{class:"bi bi-download"},null,-1),T(" CSV ",-1)])]),_:1},8,["href"]),_(m(y),{href:r.route("enumerations.export",{format:"json",form_type:i.value,sync_status:c.value,search:d.value}),class:"btn btn-sm btn-outline-secondary"},{default:f(()=>[...s[6]||(s[6]=[e("i",{class:"bi bi-download"},null,-1),T(" JSON ",-1)])]),_:1},8,["href"])])])])]),s[14]||(s[14]=e("hr",null,null,-1)),e("div",q,[e("div",z,[e("div",J,[e("div",P,[w(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),type:"text",class:"form-control",placeholder:"Search enumerator / type"},null,512),[[H,d.value]])]),e("div",Y,[w(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),class:"form-select"},[s[8]||(s[8]=e("option",{value:""},"All Types",-1)),(l(!0),a(v,null,b(n.formTypes,t=>(l(),a("option",{key:t,value:t},o(t),9,G))),128))],512),[[k,i.value]])]),e("div",K,[w(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>c.value=t),class:"form-select"},[s[9]||(s[9]=e("option",{value:""},"All Status",-1)),(l(!0),a(v,null,b(n.syncStatuses,t=>(l(),a("option",{key:t,value:t},o(t),9,Q))),128))],512),[[k,c.value]])]),e("div",W,[w(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t),class:"form-select"},[...s[10]||(s[10]=[e("option",{value:15},"15",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)])],512),[[k,g.value]])])])])]),e("div",X,[e("div",Z,[e("table",ee,[s[13]||(s[13]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Form Type"),e("th",null,"Enumerator"),e("th",null,"Sync Status"),e("th",null,"Submitted"),e("th")])],-1)),e("tbody",null,[n.records.data.length===0?(l(),a("tr",te,[...s[11]||(s[11]=[e("td",{colspan:"6",class:"text-center text-muted"},"No records found",-1)])])):M("",!0),(l(!0),a(v,null,b(n.records.data,t=>(l(),a("tr",{key:t.id},[e("td",null,o(t.id),1),e("td",null,[e("span",se,o(t.form_type),1)]),e("td",null,o(t.enumerator?t.enumerator.full_name:t.enumerator_name),1),e("td",null,[e("span",{class:B(["badge",N(t.sync_status)])},o(t.sync_status),3)]),e("td",null,[e("small",null,o(j(t.created_at)),1)]),e("td",null,[_(m(y),{href:r.route("enumerations.show",t.id),class:"btn btn-sm btn-outline-secondary"},{default:f(()=>[...s[12]||(s[12]=[e("i",{class:"bi bi-eye"},null,-1)])]),_:1},8,["href"])])]))),128))])]),n.records.data.length?(l(),a("div",le,[e("div",ae,"Showing "+o(n.records.from)+" to "+o(n.records.to)+" of "+o(n.records.total),1),e("ul",ne,[(l(!0),a(v,null,b(n.records.links,t=>(l(),a("li",{key:t.label,class:B(["page-item",{active:t.active,disabled:!t.url}])},[t.url?(l(),x(m(y),{key:0,href:t.url,class:"page-link",innerHTML:t.label},null,8,["href","innerHTML"])):(l(),a("span",{key:1,class:"page-link",innerHTML:t.label},null,8,oe))],2))),128))])])):M("",!0)])])]),_:1}))}},ce=F(re,[["__scopeId","data-v-4b38881d"]]);export{ce as default};
