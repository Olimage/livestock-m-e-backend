import{l as w,C as k,c as l,i as r,b as e,j as c,g as b,f as _,e as N,t as u,n as d,F as p,h as g,q as x,s as S,D as O,T as $,r as y,o as L,E as B,G as T,u as A,k as I,H as E}from"./app-BMlyc4xK.js";import{_ as h,a as D}from"./Includes-DNwIElno.js";const V={name:"TopBar",components:{Link:w},emits:["toggle-sidebar"],computed:{user(){var a;return((a=this.$page.props.auth)==null?void 0:a.user)||this.$page.props.user||{}},userName(){return this.user.name||"Guest"},userEmail(){return this.user.email||""},notificationCount(){return this.$page.props.notificationCount||0}},methods:{toggleSidebar(){this.$emit("toggle-sidebar")}}},F={class:"navbar navbar-expand-lg navbar-dark bg-dark fixed-top"},M={class:"container-fluid"},P={class:"d-flex align-items-center"},U={class:"dropdown"},q={class:"btn btn-link text-white dropdown-toggle d-flex align-items-center gap-2",type:"button","data-bs-toggle":"dropdown"},z={class:"user-name d-none d-md-inline"},G={key:0,class:"badge bg-danger"},W={class:"dropdown-menu dropdown-menu-end"},j={class:"dropdown-header"},H={class:"d-flex align-items-center"},J={class:"fw-bold"},K={class:"text-muted"};function Q(a,s,m,v,f,t){const i=k("Link");return r(),l("nav",F,[e("div",M,[e("button",{class:"btn btn-link text-white d-lg-none me-2",type:"button",onClick:s[0]||(s[0]=(...n)=>t.toggleSidebar&&t.toggleSidebar(...n))},[...s[1]||(s[1]=[e("i",{class:"bi bi-list fs-4"},null,-1)])]),c(i,{class:"navbar-brand",href:"/baseline/"},{default:b(()=>[...s[2]||(s[2]=[_(" FMLD ",-1)])]),_:1}),e("div",P,[e("div",U,[e("button",q,[s[3]||(s[3]=e("i",{class:"bi bi-person-circle fs-4"},null,-1)),e("span",z,u(t.userName),1),t.notificationCount>0?(r(),l("span",G,u(t.notificationCount),1)):N("",!0)]),e("ul",W,[e("li",j,[e("div",H,[s[4]||(s[4]=e("i",{class:"bi bi-person-circle fs-3 me-2"},null,-1)),e("div",null,[e("div",J,u(t.userName),1),e("small",K,u(t.userEmail),1)])])]),s[6]||(s[6]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),s[7]||(s[7]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[c(i,{href:a.route("app.logout"),class:"dropdown-item"},{default:b(()=>[...s[5]||(s[5]=[e("i",{class:"bi bi-box-arrow-right me-2"},null,-1),_("Logout ",-1)])]),_:1},8,["href"])])])])])])])}const R=h(V,[["render",Q],["__scopeId","data-v-a8a1a720"]]),X={name:"NavSidebar",components:{Link:w},props:{showOffcanvas:{type:Boolean,default:!1},navItems:{type:Array,default:()=>[]}},emits:["close-offcanvas"],data(){return{collapsed:!1,openSubmenus:[]}},computed:{menuItems(){return this.navItems.length>0?this.navItems:this.defaultNavItems},defaultNavItems(){return[{name:"Dashboard",routeName:"home",icon:"bi bi-speedometer2"},{name:"New Input",routeName:"baseline-new",icon:"bi bi-plus-square"},{name:"Saved Data",routeName:"baseline-saved-data",icon:"bi bi-floppy"}]},currentUrl(){var a;return((a=this.$page)==null?void 0:a.url)||"/"}},watch:{showOffcanvas(a){a?document.body.style.overflow="hidden":document.body.style.overflow=""},collapsed(a){a&&(this.openSubmenus=[])}},mounted(){this.menuItems.forEach(a=>{a.submenu&&a.submenu.some(m=>this.isActive(m.routeName))&&this.openSubmenus.push(a.name)})},methods:{isActive(a){return a?this.$page.props.routeName===a:!1},isActiveParent(a){return a.submenu?a.submenu.some(s=>this.isActive(s.routeName)):!1},isSubmenuOpen(a){return this.openSubmenus.includes(a)},toggleSubmenu(a){if(this.collapsed&&window.innerWidth>=992)return;const s=this.openSubmenus.indexOf(a);s>-1?this.openSubmenus.splice(s,1):this.openSubmenus.push(a)},toggleCollapse(){this.collapsed=!this.collapsed},closeOffcanvas(){this.$emit("close-offcanvas")},onNavClick(){window.innerWidth<992&&this.closeOffcanvas()}},beforeUnmount(){document.body.style.overflow=""}},Y={class:"sidebar-sticky"},Z={class:"sidebar-header p-3 border-bottom"},ee={class:"d-flex gap-2"},se={class:"sidebar-nav"},ne={class:"nav flex-column"},ae={key:0,class:"nav-item"},te=["onClick"],oe={class:"nav-text"},ie={class:"submenu nav flex-column"},le={class:"nav-text"},re={key:1,class:"nav-item"},ue={class:"nav-text"};function de(a,s,m,v,f,t){const i=k("Link");return r(),l("div",null,[e("div",{class:d(["offcanvas-overlay",{show:m.showOffcanvas}]),onClick:s[0]||(s[0]=(...n)=>t.closeOffcanvas&&t.closeOffcanvas(...n))},null,2),e("div",{class:d(["sidebar",{"sidebar-collapsed":f.collapsed},{"offcanvas-show":m.showOffcanvas}])},[e("div",Y,[e("div",Z,[s[4]||(s[4]=e("h6",{class:"mb-0"},"Navigation",-1)),e("div",ee,[e("button",{class:"btn btn-sm btn-outline-secondary tog-btn d-none d-lg-block",onClick:s[1]||(s[1]=(...n)=>t.toggleCollapse&&t.toggleCollapse(...n))},[e("i",{class:d(f.collapsed?"bi bi-chevron-right":"bi bi-chevron-left")},null,2)]),e("button",{class:"btn btn-sm btn-outline-secondary tog-btn d-lg-none",onClick:s[2]||(s[2]=(...n)=>t.closeOffcanvas&&t.closeOffcanvas(...n))},[...s[3]||(s[3]=[e("i",{class:"bi bi-x-lg"},null,-1)])])])]),e("nav",se,[e("ul",ne,[(r(!0),l(p,null,g(t.menuItems,n=>(r(),l(p,{key:n.name},[n.submenu&&n.submenu.length>0?(r(),l("li",ae,[e("a",{href:"#",class:d(["nav-link",{active:t.isActiveParent(n),"has-submenu":!0}]),onClick:x(o=>t.toggleSubmenu(n.name),["prevent"])},[e("i",{class:d(n.icon)},null,2),e("span",oe,u(n.name),1),e("i",{class:d(["bi submenu-arrow",t.isSubmenuOpen(n.name)?"bi-chevron-down":"bi-chevron-right"])},null,2)],10,te),c($,{name:"submenu"},{default:b(()=>[S(e("ul",ie,[(r(!0),l(p,null,g(n.submenu,o=>(r(),l("li",{class:"nav-item",key:o.name},[c(i,{href:o.url||a.route(o.routeName),class:d(["nav-link submenu-link",{active:t.isActive(o.routeName)}]),onClick:t.onNavClick},{default:b(()=>[e("i",{class:d(o.icon)},null,2),e("span",le,u(o.name),1)]),_:2},1032,["href","class","onClick"])]))),128))],512),[[O,t.isSubmenuOpen(n.name)]])]),_:2},1024)])):(r(),l("li",re,[c(i,{href:n.url||a.route(n.routeName),class:d(["nav-link",{active:t.isActive(n.routeName)}]),onClick:t.onNavClick},{default:b(()=>[e("i",{class:d(n.icon)},null,2),e("span",ue,u(n.name),1)]),_:2},1032,["href","class","onClick"])]))],64))),128))])])])],2)])}const ce=h(X,[["render",de],["__scopeId","data-v-a0753255"]]),me={"aria-live":"polite","aria-atomic":"true",class:"position-fixed top-0 end-0 p-3",style:{"z-index":"1080"}},fe={class:"toast-header"},ve={class:"me-auto"},be=["onClick"],pe={class:"toast-body"},he={key:0},_e={key:1},ge={__name:"Toaster",setup(a){const s=y([]);let m=0;const v=i=>{const n=++m,o={id:n,message:i.message||"",payload:i.payload||null,variant:i.variant||"info",timeout:i.timeout??5e3};s.value.push(o),setTimeout(()=>f(n),o.timeout)},f=i=>{const n=s.value.findIndex(o=>o.id===i);n!==-1&&s.value.splice(n,1)},t=i=>{v(i.detail||{})};return L(()=>{window.addEventListener("app:notify",t)}),B(()=>{window.removeEventListener("app:notify",t)}),(i,n)=>(r(),l("div",me,[(r(!0),l(p,null,g(s.value,o=>(r(),l("div",{key:o.id,class:"toast show mb-2 shadow-lg",role:"alert","aria-live":"assertive","aria-atomic":"true"},[e("div",fe,[e("strong",ve,u(o.variant==="success"?"Success":o.variant==="danger"?"Error":"Notice"),1),n[0]||(n[0]=e("small",{class:"text-muted"},"now",-1)),e("button",{type:"button",class:"btn-close ms-2 mb-1",onClick:C=>f(o.id)},null,8,be)]),e("div",pe,[o.payload?(r(),l("div",he,[_(u(o.message)+" â€” ",1),e("small",null,u(JSON.stringify(o.payload)),1)])):(r(),l("div",_e,u(o.message),1))])]))),128))]))}},we=h(ge,[["__scopeId","data-v-2b43ee6d"]]),ke={class:"main-content"},ye={__name:"BeLayout",setup(a){var t,i,n;const s=y(!1),m=()=>{s.value=!s.value},v=()=>{s.value=!1},f=T();return(i=(t=f.props.auth)==null?void 0:t.user)!=null&&i.id||(n=f.props.user)!=null&&n.id,(o,C)=>(r(),l("div",null,[c(D),c(A(I),{title:"Baseline"}),c(R,{onToggleSidebar:m}),c(ce,{"nav-items":o.$page.props.navigation,showOffcanvas:s.value,onCloseOffcanvas:v},null,8,["nav-items","showOffcanvas"]),e("main",ke,[E(o.$slots,"default",{},void 0),c(we)])]))}},xe=h(ye,[["__scopeId","data-v-b37c5fd0"]]);export{xe as B};
