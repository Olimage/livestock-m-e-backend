import{r as p,w as E,A as S,g as O,h,i as u,b as e,u as c,j as F,d as r,t as o,q as D,v as H,y as P,l as x,c as m,s as $,n,f as i,F as B,e as M}from"./app-BiE81L3r.js";import{B as q}from"./BeLayout-c8f4LfUo.js";import{_ as z}from"./Includes-0G2CgwRG.js";const R={class:"row mb-2"},G={class:"col-lg-12"},J={class:"text-muted"},K={class:"row card mb-2"},Q={class:"col-sm-12 col-md-12 col-lg-12"},W={class:"card-body"},X={class:"row"},Y={class:"col-md-4"},Z={class:"card text-bg-success mb-3"},ee={class:"card-body"},te={class:"mont-font fs-3 fw-800 mb-8 text-start"},se={class:"row mb-3"},le={class:"col-md-8 mb-2"},ae={class:"input-group"},oe={class:"col-md-2 mb-2"},re={class:"col-md-2 mb-2"},ne={class:"row"},ie={class:"col-lg-12"},de={class:"card"},ue={class:"card-body"},ce={class:"table-responsive"},me={class:"table table-hover align-middle"},ve={class:"table-light"},be={key:0},fe={class:"d-flex align-items-center"},ge={class:"avatar-circle me-2"},pe={class:"text-center"},he={class:"btn-group",role:"group"},xe=["onClick"],ye={key:0,class:"d-flex justify-content-between align-items-center mt-3"},_e={class:"text-muted small"},we={class:"pagination mb-0"},Ne={__name:"Index",props:{users:Object,filters:Object,userCount:Number},setup(a){const y=a,_=p(y.filters.search||""),w=p(y.filters.per_page||10),v=p(y.filters.sort_by||"created_at"),d=p(y.filters.sort_order||"desc"),N=p(null),V=s=>{const t=(s==null?void 0:s.full_name)||(s==null?void 0:s.name)||"";return!t||typeof t!="string"||t.length===0?"?":t.charAt(0).toUpperCase()},j=s=>(s==null?void 0:s.full_name)||(s==null?void 0:s.name)||"N/A",I=s=>{if(!s)return"N/A";try{const t=s.replace(" ","T"),g=new Date(t);return isNaN(g.getTime())?"N/A":g.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}};E([_,w,v,d],()=>{clearTimeout(N.value),N.value=setTimeout(()=>{S.get("/users",{search:_.value,per_page:w.value,sort_by:v.value,sort_order:d.value},{preserveState:!0,preserveScroll:!0})},300)});const L=s=>{confirm("Are you sure you want to delete this user?")&&S.delete(`/users/${s}`,{preserveScroll:!0})},b=s=>{v.value===s?d.value=d.value==="asc"?"desc":"asc":(v.value=s,d.value="asc")},f=s=>v.value!==s?"bi bi-arrow-down-up":d.value==="asc"?"bi bi-arrow-up":"bi bi-arrow-down";return(s,t)=>(i(),O(q,null,{default:h(()=>{var g,k,C,A,T;return[u(c(F),{title:" Users"}),t[24]||(t[24]=e("div",{class:"row"},[e("div",{class:"col-lg-12"},[e("h5",{class:"mt-4 fw-400"},"Users Management"),e("hr")])],-1)),e("div",R,[e("div",G,[e("p",J,[t[7]||(t[7]=r(" Manage all users of the application. Total Users: ",-1)),e("strong",null,o(a.userCount),1)])])]),e("div",K,[e("div",Q,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[t[8]||(t[8]=e("div",{class:"card-header"},"Total Users",-1)),e("div",ee,[e("h4",te,o(a.userCount),1)])]),t[9]||(t[9]=e("div",{class:"clearfix"},null,-1))])])])]),e("div",se,[e("div",le,[e("div",ae,[t[10]||(t[10]=e("span",{class:"input-group-text"},[e("i",{class:"bi bi-search"})],-1)),D(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>_.value=l),type:"text",class:"form-control",placeholder:"Search by name or email..."},null,512),[[H,_.value]])])]),e("div",oe,[D(e("select",{"onUpdate:modelValue":t[1]||(t[1]=l=>w.value=l),class:"form-select"},[...t[11]||(t[11]=[e("option",{value:10},"10 per page",-1),e("option",{value:25},"25 per page",-1),e("option",{value:50},"50 per page",-1),e("option",{value:100},"100 per page",-1)])],512),[[P,w.value]])]),e("div",re,[u(c(x),{href:s.route("users.create"),class:"btn btn-success w-100"},{default:h(()=>[...t[12]||(t[12]=[e("i",{class:"bi bi-plus-circle"},null,-1),r(" Add User ",-1)])]),_:1},8,["href"])])])]),e("div",ne,[e("div",ie,[e("div",de,[e("div",ue,[e("div",ce,[e("table",me,[e("thead",ve,[e("tr",null,[e("th",{onClick:t[2]||(t[2]=l=>b("role")),class:"sortable"},[t[13]||(t[13]=r(" Role ",-1)),e("i",{class:n(f("role"))},null,2)]),e("th",{onClick:t[3]||(t[3]=l=>b("full_name")),class:"sortable"},[t[14]||(t[14]=r(" Name ",-1)),e("i",{class:n(f("full_name"))},null,2)]),e("th",{onClick:t[4]||(t[4]=l=>b("email")),class:"sortable"},[t[15]||(t[15]=r(" Department ",-1)),e("i",{class:n(f("email"))},null,2)]),e("th",{onClick:t[5]||(t[5]=l=>b("email")),class:"sortable"},[t[16]||(t[16]=r(" Email ",-1)),e("i",{class:n(f("email"))},null,2)]),e("th",{onClick:t[6]||(t[6]=l=>b("created_at")),class:"sortable"},[t[17]||(t[17]=r(" Created At ",-1)),e("i",{class:n(f("created_at"))},null,2)]),t[18]||(t[18]=e("th",{class:"text-center"},"Actions",-1))])]),e("tbody",null,[!((g=a.users)!=null&&g.data)||a.users.data.length===0?(i(),m("tr",be,[...t[19]||(t[19]=[e("td",{colspan:"6",class:"text-center py-4"},[e("i",{class:"bi bi-inbox fs-1 text-muted"}),e("p",{class:"text-muted mb-0"},"No users found")],-1)])])):$("",!0),(i(!0),m(B,null,M((k=a.users)==null?void 0:k.data,l=>(i(),m("tr",{key:l.id},[e("td",null,o(l.role),1),e("td",null,[e("div",fe,[e("div",ge,o(V(l)),1),e("strong",null,o(j(l)),1)])]),e("td",null,o((l.departments||[]).map(U=>U.name).join(" - ")||"N/A"),1),e("td",null,o(l.email||"N/A"),1),e("td",null,o(I(l.created_at)),1),e("td",pe,[e("div",he,[u(c(x),{href:`/users/${l.id}/edit`,class:"btn btn-sm btn-outline-primary",title:"Edit"},{default:h(()=>[...t[20]||(t[20]=[e("i",{class:"bi bi-pencil"},null,-1)])]),_:1},8,["href"]),e("button",{onClick:U=>L(l.id),class:"btn btn-sm btn-outline-danger",title:"Delete"},[...t[21]||(t[21]=[e("i",{class:"bi bi-trash"},null,-1)])],8,xe)])])]))),128))])])]),(C=a.users)!=null&&C.data&&a.users.data.length>0?(i(),m("div",ye,[e("div",_e," Showing "+o(a.users.from)+" to "+o(a.users.to)+" of "+o(a.users.total)+" entries ",1),e("nav",null,[e("ul",we,[e("li",{class:n(["page-item",{disabled:!a.users.prev_page_url}])},[u(c(x),{href:a.users.prev_page_url||"#",class:"page-link","preserve-state":"","preserve-scroll":""},{default:h(()=>[...t[22]||(t[22]=[r(" Previous ",-1)])]),_:1},8,["href"])],2),(i(!0),m(B,null,M(((T=(A=a.users)==null?void 0:A.links)==null?void 0:T.slice(1,-1))||[],l=>(i(),m("li",{key:l.label,class:n(["page-item",{active:l.active}])},[u(c(x),{href:l.url||"#",class:"page-link","preserve-state":"","preserve-scroll":"",innerHTML:l.label},null,8,["href","innerHTML"])],2))),128)),e("li",{class:n(["page-item",{disabled:!a.users.next_page_url}])},[u(c(x),{href:a.users.next_page_url||"#",class:"page-link","preserve-state":"","preserve-scroll":""},{default:h(()=>[...t[23]||(t[23]=[r(" Next ",-1)])]),_:1},8,["href"])],2)])])])):$("",!0)])])])])]}),_:1}))}},Te=z(Ne,[["__scopeId","data-v-e774c662"]]);export{Te as default};
