import{r as p,q as k,k as w,e as g,b as x,a as s,c as o,j as m,u as n,m as S,l as N,y as b,g as l,F as v,f as _,d as f,t as r,s as B,v as M,A as V}from"./app-DcNYCev6.js";import{B as F}from"./BeLayout-D112bSTL.js";import{_ as $}from"./Includes-b2JoZYth.js";const q={class:"row"},I={class:"col-4 text-end mt-3"},j={class:"row"},D={class:"col-12"},L={class:"card"},T={class:"card-body"},U={key:0,class:"text-center py-4"},z={class:"d-flex justify-content-between align-items-center mb-2"},G={class:"mb-0"},H={class:"text-muted"},J=["onClick"],K={class:"table-responsive"},O={class:"table table-sm"},P={key:0},Q={class:"text-end"},R=["onClick"],W={key:0,class:"modal d-block",tabindex:"-1"},X={class:"modal-dialog"},Y={class:"modal-content"},Z={class:"modal-header"},ss={class:"modal-title"},es={class:"modal-body"},ts={key:0,class:"text-center py-3"},ls={key:1,class:"mb-3"},os=["id","value"],as=["for"],ns={class:"text-muted"},rs={key:0,class:"text-danger"},is={class:"text-end"},ds=["disabled"],us={__name:"Index",props:{supervisors:{type:Array,required:!0,default:()=>[]},availableEnumerators:{type:Array,required:!0,default:()=>[]}},setup(d){const y=p(null),u=p(!1),a=k({supervisor_id:"",enumerator_ids:[]}),E=c=>{y.value=c,a.supervisor_id=c.id,a.enumerator_ids=[],u.value=!0},A=()=>{a.post(b("supervisor-enumerators.assign"),{onSuccess:()=>{u.value=!1,a.reset()}})},C=(c,e)=>{confirm("Are you sure you want to remove this enumerator?")&&k().delete(b("supervisor-enumerators.remove",{supervisor:c,enumerator:e}),{preserveScroll:!0})};return(c,e)=>(l(),w(F,null,{default:g(()=>{var h;return[x(n(S),{title:"Supervisor-Enumerator Management"}),s("div",q,[e[4]||(e[4]=s("div",{class:"col-8"},[s("h5",{class:"mt-4 fw-400"},"Supervisor-Enumerator Management")],-1)),s("div",I,[x(n(N),{href:n(b)("supervisor-enumerators.create"),class:"btn btn-sm btn-primary"},{default:g(()=>[...e[3]||(e[3]=[s("i",{class:"bi bi-plus-circle"},null,-1)])]),_:1},8,["href"])]),e[5]||(e[5]=s("div",{class:"col-12"},[s("hr")],-1))]),s("div",j,[s("div",D,[s("div",L,[s("div",T,[!d.supervisors||d.supervisors.length===0?(l(),o("div",U,[...e[6]||(e[6]=[s("p",{class:"text-muted mb-0"},"No supervisors found",-1)])])):(l(!0),o(v,{key:1},_(d.supervisors,t=>(l(),o("div",{key:t.id,class:"mb-4"},[s("div",z,[s("h6",G,[f(r(t.full_name)+" ",1),s("small",H,"("+r(t.email)+")",1)]),s("button",{onClick:i=>E(t),class:"btn btn-sm btn-outline-primary"},[...e[7]||(e[7]=[s("i",{class:"bi bi-plus-circle"},null,-1),f(" Assign Enumerators ",-1)])],8,J)]),s("div",K,[s("table",O,[e[10]||(e[10]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Name"),s("th",null,"Email"),s("th",{class:"text-end"},"Actions")])],-1)),s("tbody",null,[!t.enumerators||t.enumerators.length===0?(l(),o("tr",P,[...e[8]||(e[8]=[s("td",{colspan:"3",class:"text-center text-muted"}," No enumerators assigned ",-1)])])):m("",!0),(l(!0),o(v,null,_(t.enumerators,i=>(l(),o("tr",{key:i.id},[s("td",null,r(i.full_name),1),s("td",null,r(i.email??"â€”"),1),s("td",Q,[s("button",{onClick:cs=>C(t.id,i.id),class:"btn btn-sm btn-outline-danger"},[...e[9]||(e[9]=[s("i",{class:"bi bi-trash"},null,-1)])],8,R)])]))),128))])])])]))),128))])])])]),u.value?(l(),o("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("h5",ss," Assign Enumerators to "+r((h=y.value)==null?void 0:h.full_name),1),s("button",{onClick:e[0]||(e[0]=t=>u.value=!1),type:"button",class:"btn-close"})]),s("div",es,[s("form",{onSubmit:B(A,["prevent"])},[!d.availableEnumerators||d.availableEnumerators.length===0?(l(),o("div",ts,[...e[11]||(e[11]=[s("p",{class:"text-muted mb-0"},"No available enumerators to assign",-1)])])):(l(),o("div",ls,[e[12]||(e[12]=s("label",{class:"form-label"},"Select Enumerators",-1)),(l(!0),o(v,null,_(d.availableEnumerators,t=>(l(),o("div",{class:"form-check",key:t.id},[M(s("input",{type:"checkbox",class:"form-check-input",id:"enumerator-"+t.id,value:t.id,"onUpdate:modelValue":e[1]||(e[1]=i=>n(a).enumerator_ids=i)},null,8,os),[[V,n(a).enumerator_ids]]),s("label",{class:"form-check-label",for:"enumerator-"+t.id},[f(r(t.full_name)+" ",1),s("small",ns,"("+r(t.email)+")",1)],8,as)]))),128)),n(a).errors.enumerator_ids?(l(),o("small",rs,r(n(a).errors.enumerator_ids),1)):m("",!0)])),s("div",is,[s("button",{type:"button",class:"btn btn-secondary me-2",onClick:e[2]||(e[2]=t=>u.value=!1)}," Cancel "),s("button",{type:"submit",class:"btn btn-primary",disabled:n(a).processing}," Assign Selected ",8,ds)])],32)])])])])):m("",!0)]}),_:1}))}},_s=$(us,[["__scopeId","data-v-76dcef02"]]);export{_s as default};
