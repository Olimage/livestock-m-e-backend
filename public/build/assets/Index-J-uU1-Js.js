import{r as y,p as k,d as w,g,j as x,b as s,c as o,e as b,u as a,k as S,l as N,z as v,f as m,i as l,F as _,h as f,t as r,q as B,s as M,A as V}from"./app-CRduYzfZ.js";import{B as F}from"./BeLayout-CF6fqCw2.js";import{_ as $}from"./Includes-C6kNh0Lp.js";const q={class:"row"},I={class:"col-4 text-end mt-3"},j={class:"row"},D={class:"col-12"},L={class:"card"},z={class:"card-body"},T={key:0,class:"text-center py-4"},U={class:"d-flex justify-content-between align-items-center mb-2"},G={class:"mb-0"},H={class:"text-muted"},J=["onClick"],K={class:"table-responsive"},O={class:"table table-sm"},P={key:0},Q={class:"text-end"},R=["onClick"],W={key:0,class:"modal d-block",tabindex:"-1"},X={class:"modal-dialog"},Y={class:"modal-content"},Z={class:"modal-header"},ss={class:"modal-title"},es={class:"modal-body"},ts={key:0,class:"text-center py-3"},ls={key:1,class:"mb-3"},os=["id","value"],ns=["for"],as={class:"text-muted"},rs={key:0,class:"text-danger"},is={class:"text-end"},ds=["disabled"],us={__name:"Index",props:{supervisors:{type:Array,required:!0,default:()=>[]},availableEnumerators:{type:Array,required:!0,default:()=>[]}},setup(d){const h=y(null),u=y(!1),n=k({supervisor_id:"",enumerator_ids:[]}),E=c=>{h.value=c,n.supervisor_id=c.id,n.enumerator_ids=[],u.value=!0},A=()=>{n.post(v("supervisor-enumerators.assign"),{onSuccess:()=>{u.value=!1,n.reset()}})},C=(c,e)=>{confirm("Are you sure you want to remove this enumerator?")&&k().delete(v("supervisor-enumerators.remove",{supervisor:c,enumerator:e}),{preserveScroll:!0})};return(c,e)=>(l(),w(F,null,{default:g(()=>{var p;return[x(a(S),{title:"Supervisor-Enumerator Management"}),s("div",q,[e[4]||(e[4]=s("div",{class:"col-8"},[s("h5",{class:"mt-4 fw-400"},"Supervisor-Enumerator Management")],-1)),s("div",I,[x(a(N),{href:a(v)("supervisor-enumerators.create"),class:"btn btn-sm btn-primary"},{default:g(()=>[...e[3]||(e[3]=[m(" Creat new Assignment ",-1),s("i",{class:"bi bi-plus-circle"},null,-1)])]),_:1},8,["href"])]),e[5]||(e[5]=s("div",{class:"col-12"},[s("hr")],-1))]),s("div",j,[s("div",D,[s("div",L,[s("div",z,[!d.supervisors||d.supervisors.length===0?(l(),o("div",T,[...e[6]||(e[6]=[s("p",{class:"text-muted mb-0"},"No supervisors found",-1)])])):(l(!0),o(_,{key:1},f(d.supervisors,t=>(l(),o("div",{key:t.id,class:"mb-4"},[s("div",U,[s("h6",G,[m(r(t.full_name)+" ",1),s("small",H,"("+r(t.email)+")",1)]),s("button",{onClick:i=>E(t),class:"btn btn-sm btn-outline-primary"},[...e[7]||(e[7]=[s("i",{class:"bi bi-plus-circle"},null,-1),m(" Assign Enumerators ",-1)])],8,J)]),s("div",K,[s("table",O,[e[10]||(e[10]=s("thead",{class:"table-light"},[s("tr",null,[s("th",null,"Name"),s("th",null,"Email"),s("th",{class:"text-end"},"Actions")])],-1)),s("tbody",null,[!t.enumerators||t.enumerators.length===0?(l(),o("tr",P,[...e[8]||(e[8]=[s("td",{colspan:"3",class:"text-center text-muted"}," No enumerators assigned ",-1)])])):b("",!0),(l(!0),o(_,null,f(t.enumerators,i=>(l(),o("tr",{key:i.id},[s("td",null,r(i.full_name),1),s("td",null,r(i.email??"â€”"),1),s("td",Q,[s("button",{onClick:cs=>C(t.id,i.id),class:"btn btn-sm btn-outline-danger"},[...e[9]||(e[9]=[s("i",{class:"bi bi-trash"},null,-1)])],8,R)])]))),128))])])])]))),128))])])])]),u.value?(l(),o("div",W,[s("div",X,[s("div",Y,[s("div",Z,[s("h5",ss," Assign Enumerators to "+r((p=h.value)==null?void 0:p.full_name),1),s("button",{onClick:e[0]||(e[0]=t=>u.value=!1),type:"button",class:"btn-close"})]),s("div",es,[s("form",{onSubmit:B(A,["prevent"])},[!d.availableEnumerators||d.availableEnumerators.length===0?(l(),o("div",ts,[...e[11]||(e[11]=[s("p",{class:"text-muted mb-0"},"No available enumerators to assign",-1)])])):(l(),o("div",ls,[e[12]||(e[12]=s("label",{class:"form-label"},"Select Enumerators",-1)),(l(!0),o(_,null,f(d.availableEnumerators,t=>(l(),o("div",{class:"form-check",key:t.id},[M(s("input",{type:"checkbox",class:"form-check-input",id:"enumerator-"+t.id,value:t.id,"onUpdate:modelValue":e[1]||(e[1]=i=>a(n).enumerator_ids=i)},null,8,os),[[V,a(n).enumerator_ids]]),s("label",{class:"form-check-label",for:"enumerator-"+t.id},[m(r(t.full_name)+" ",1),s("small",as,"("+r(t.email)+")",1)],8,ns)]))),128)),a(n).errors.enumerator_ids?(l(),o("small",rs,r(a(n).errors.enumerator_ids),1)):b("",!0)])),s("div",is,[s("button",{type:"button",class:"btn btn-secondary me-2",onClick:e[2]||(e[2]=t=>u.value=!1)}," Cancel "),s("button",{type:"submit",class:"btn btn-primary",disabled:a(n).processing}," Assign Selected ",8,ds)])],32)])])])])):b("",!0)]}),_:1}))}},_s=$(us,[["__scopeId","data-v-d428f2ed"]]);export{_s as default};
