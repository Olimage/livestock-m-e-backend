import{r as h,w as D,A as $,g as x,h as f,i as _,b as e,u as m,j as C,c as n,f as l,F as v,e as b,l as y,d as T,t as a,q as w,v as H,y as k,s as M,n as B}from"./app-BiE81L3r.js";import{B as E}from"./BeLayout-c8f4LfUo.js";import{_ as F}from"./Includes-0G2CgwRG.js";const I={class:"row mb-3"},U={class:"col-12 d-flex justify-content-between align-items-center"},z={class:"btn-group"},O={class:"btn-group ms-2"},R={class:"card mb-3"},q={class:"card-body"},G={class:"row g-2"},J={class:"col-md-3"},P={class:"col-md-2"},Y=["value"],Z={class:"col-md-2"},K=["value"],Q={class:"col-md-2"},W={class:"card"},X={class:"card-body table-responsive"},ee={class:"table table-hover align-middle"},te={key:0},se={class:"badge bg-primary"},le={key:0,class:"d-flex justify-content-between align-items-center"},ae={class:"small text-muted"},ne={class:"pagination mb-0"},oe=["innerHTML"],re={__name:"Index",props:{records:Object,filters:Object,formTypes:Array,syncStatuses:Array},setup(o){const p=o,d=h(p.filters.search||""),i=h(p.filters.form_type||""),c=h(p.filters.sync_status||""),g=h(p.filters.per_page||15);let V=null;D([d,i,c,g],()=>{clearTimeout(V),V=setTimeout(()=>{$.get(route("enumerations.index"),{search:d.value,form_type:i.value,sync_status:c.value,per_page:g.value},{preserveState:!0,preserveScroll:!0})},300)});const L=r=>{switch(r){case"synced":return"bg-success";case"failed":return"bg-danger";default:return"bg-warning text-dark"}},N=r=>{if(!r)return"";const s=new Date(r),t=S=>S<10?"0"+S:S;let u=s.getHours();const j=t(s.getMinutes()),A=u>=12?"pm":"am";return u=u%12,u=u||12,`${t(s.getDate())}-${t(s.getMonth()+1)}-${s.getFullYear()} - ${t(u)}:${j} ${A}`};return(r,s)=>(l(),x(E,null,{default:f(()=>[_(m(C),{title:"Enumeration Records"}),e("div",I,[e("div",U,[s[7]||(s[7]=e("h5",{class:"mt-4 fw-400"},"Enumeration Records",-1)),e("div",z,[(l(!0),n(v,null,b(o.formTypes,t=>(l(),x(m(y),{key:t,href:r.route("enumerations.create",t),class:"btn btn-sm btn-success"},{default:f(()=>[s[4]||(s[4]=e("i",{class:"bi bi-plus-circle"},null,-1)),T(" New "+a(t.replace("_"," ")),1)]),_:2},1032,["href"]))),128)),e("div",O,[_(m(y),{href:r.route("enumerations.export",{format:"csv",form_type:i.value,sync_status:c.value,search:d.value}),class:"btn btn-sm btn-outline-primary"},{default:f(()=>[...s[5]||(s[5]=[e("i",{class:"bi bi-download"},null,-1),T(" CSV ",-1)])]),_:1},8,["href"]),_(m(y),{href:r.route("enumerations.export",{format:"json",form_type:i.value,sync_status:c.value,search:d.value}),class:"btn btn-sm btn-outline-secondary"},{default:f(()=>[...s[6]||(s[6]=[e("i",{class:"bi bi-download"},null,-1),T(" JSON ",-1)])]),_:1},8,["href"])])])])]),s[14]||(s[14]=e("hr",null,null,-1)),e("div",R,[e("div",q,[e("div",G,[e("div",J,[w(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>d.value=t),type:"text",class:"form-control",placeholder:"Search enumerator / type"},null,512),[[H,d.value]])]),e("div",P,[w(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>i.value=t),class:"form-select"},[s[8]||(s[8]=e("option",{value:""},"All Types",-1)),(l(!0),n(v,null,b(o.formTypes,t=>(l(),n("option",{key:t,value:t},a(t),9,Y))),128))],512),[[k,i.value]])]),e("div",Z,[w(e("select",{"onUpdate:modelValue":s[2]||(s[2]=t=>c.value=t),class:"form-select"},[s[9]||(s[9]=e("option",{value:""},"All Status",-1)),(l(!0),n(v,null,b(o.syncStatuses,t=>(l(),n("option",{key:t,value:t},a(t),9,K))),128))],512),[[k,c.value]])]),e("div",Q,[w(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>g.value=t),class:"form-select"},[...s[10]||(s[10]=[e("option",{value:15},"15",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1)])],512),[[k,g.value]])])])])]),e("div",W,[e("div",X,[e("table",ee,[s[13]||(s[13]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Form Type"),e("th",null,"Enumerator"),e("th",null,"Zone"),e("th",null,"State"),e("th",null,"LGA"),e("th",null,"Sync Status"),e("th",null,"Submitted"),e("th")])],-1)),e("tbody",null,[o.records.data.length===0?(l(),n("tr",te,[...s[11]||(s[11]=[e("td",{colspan:"9",class:"text-center text-muted"},"No records found",-1)])])):M("",!0),(l(!0),n(v,null,b(o.records.data,t=>(l(),n("tr",{key:t.id},[e("td",null,a(t.id),1),e("td",null,[e("span",se,a(t.form_type),1)]),e("td",null,a(t.enumerator?t.enumerator.full_name:t.enumerator_name),1),e("td",null,[e("small",null,a(t.zone?t.zone.name:"—"),1)]),e("td",null,[e("small",null,a(t.state?t.state.name:"—"),1)]),e("td",null,[e("small",null,a(t.lga?t.lga.name:"—"),1)]),e("td",null,[e("span",{class:B(["badge",L(t.sync_status)])},a(t.sync_status),3)]),e("td",null,[e("small",null,a(N(t.created_at)),1)]),e("td",null,[_(m(y),{href:r.route("enumerations.show",t.id),class:"btn btn-sm btn-outline-secondary"},{default:f(()=>[...s[12]||(s[12]=[e("i",{class:"bi bi-eye"},null,-1)])]),_:1},8,["href"])])]))),128))])]),o.records.data.length?(l(),n("div",le,[e("div",ae,"Showing "+a(o.records.from)+" to "+a(o.records.to)+" of "+a(o.records.total),1),e("ul",ne,[(l(!0),n(v,null,b(o.records.links,t=>(l(),n("li",{key:t.label,class:B(["page-item",{active:t.active,disabled:!t.url}])},[t.url?(l(),x(m(y),{key:0,href:t.url,class:"page-link",innerHTML:t.label},null,8,["href","innerHTML"])):(l(),n("span",{key:1,class:"page-link",innerHTML:t.label},null,8,oe))],2))),128))])])):M("",!0)])])]),_:1}))}},ce=F(re,[["__scopeId","data-v-615d2b69"]]);export{ce as default};
